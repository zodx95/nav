import{a as Te,b as Le}from"./chunk-HTCZRAHM.js";import{a as ye}from"./chunk-PLWSPPAT.js";import{a as xe,b as ve,c as we,d as Me,e as be,f as Ne,g as Ie}from"./chunk-IECFJ7TH.js";import{m as P}from"./chunk-NB53OB3U.js";import{a as de,b as _e}from"./chunk-YUEYOZK7.js";import{d as ge,f as ue,h as fe,i as he,j as Se,k as ze,l as Ce}from"./chunk-2UBF7DJR.js";import"./chunk-BULOAKVY.js";import{n as pe,o as ce}from"./chunk-JUNLPJTS.js";import{a as N}from"./chunk-RUARBA4R.js";import"./chunk-FFMFXF2F.js";import"./chunk-YIMOYVWT.js";import{f as ae,g as me,h as le,j as se}from"./chunk-55KJMGBM.js";import"./chunk-ZSEUYW6W.js";import"./chunk-UNWH3DEJ.js";import{$b as J,Aa as A,Ac as re,Ec as b,Vb as j,Yb as H,Zb as q,ac as K,fc as Q,gc as X,hc as Y,ic as Z,jc as ee,kc as te,wc as ie,xc as ne,zc as oe}from"./chunk-AZX3KA3H.js";import{Ad as B,Bd as G,Db as f,Dc as z,Ec as C,Fc as y,Jd as U,Nc as W,Td as R,Ub as l,Vb as m,Wb as a,Xb as v,Xc as V,a as I,b as T,cc as h,fb as F,fc as u,g as k,ib as n,ic as _,sa as c,sb as w,sc as L,se as E,ta as d,uc as O,xb as $,xc as p,yc as g,zc as M,ze as S}from"./chunk-UEKQIHXX.js";function Ve(s,o){if(s&1){let e=h();m(0,"app-upload-image",19),u("onChange",function(t){c(e);let r=_();return d(r.onLogoChange(t,"logo"))}),a()}}function Ee(s,o){if(s&1){let e=h();m(0,"app-upload-image",19),u("onChange",function(t){c(e);let r=_();return d(r.onLogoChange(t,"darkLogo"))}),a()}}function Pe(s,o){if(s&1){let e=h();m(0,"input",31),y("ngModelChange",function(t){c(e);let r=_().$implicit;return C(r.url,t)||(r.url=t),d(t)}),a()}if(s&2){let e=_().$implicit;z("ngModel",e.url)}}function De(s,o){if(s&1&&v(0,"img",32),s&2){let e=_().$implicit;l("src",e.icon,F)}}function ke(s,o){if(s&1){let e=h();m(0,"a",33),u("nzOnConfirm",function(){c(e);let t=_().index,r=_();return d(r.handleDelete(t))}),p(1),a()}if(s&2){let e=_(2);l("nzPopconfirmTitle",e.$t("_confirmDel")),n(),M(" ",e.$t("_del")," ")}}function Fe(s,o){if(s&1){let e=h();m(0,"tr")(1,"td")(2,"input",20),y("ngModelChange",function(t){let r=c(e).$implicit;return C(r.name,t)||(r.name=t),d(t)}),a()(),m(3,"td"),f(4,Pe,1,1,"input",21),a(),m(5,"td",22),f(6,De,1,1,"img",23),m(7,"input",24),y("ngModelChange",function(t){let r=c(e).$implicit;return C(r.icon,t)||(r.icon=t),d(t)}),a(),m(8,"app-upload-image",19),u("onChange",function(t){let r=c(e).index,x=_();return d(x.onChangeUpload(t,r))}),a()(),m(9,"td")(10,"input",25),y("ngModelChange",function(t){let r=c(e).$implicit;return C(r.placeholder,t)||(r.placeholder=t),d(t)}),a()(),m(11,"td")(12,"nz-switch",26),y("ngModelChange",function(t){let r=c(e).$implicit;return C(r.blocked,t)||(r.blocked=t),d(t)}),a()(),m(13,"td",27)(14,"a",28),u("click",function(){let t=c(e).index,r=_();return d(r.moveUp(t))}),p(15),a(),m(16,"a",29),u("click",function(){let t=c(e).index,r=_();return d(r.moveDown(t))}),p(17),a(),f(18,ke,2,2,"a",30),a()()}if(s&2){let e=o.$implicit,i=o.index,t=_();n(2),z("ngModel",e.name),n(2),l("ngIf",!e.isInner),n(2),l("ngIf",e.icon),n(),z("ngModel",e.icon),n(3),z("ngModel",e.placeholder),n(2),z("ngModel",e.blocked),n(2),O("invisible",i===0),n(),g(t.$t("_moveUp")),n(2),g(t.$t("_moveDown")),n(),l("ngIf",!e.isInner)}}var D=class s{constructor(o,e,i){this.fb=o;this.message=e;this.modal=i;let t=T(I({},E()),{list:null}),r={};for(let x in t)t[x]!=null&&(r[x]=[t[x]]);this.validateForm=this.fb.group(r)}$t=S;searchList=E().list;submitting=!1;validateForm;onLogoChange(o,e){this.validateForm.get(e)?.setValue(o.cdn||"")}handleAdd(){this.searchList.some(e=>!e.name.trim())||this.searchList.unshift({name:"",url:"",icon:"",placeholder:"",blocked:!1,isInner:!1})}handleDelete(o){this.searchList.splice(o,1)}moveUp(o){if(o===0)return;let e=this.searchList[o],i=this.searchList[o-1];this.searchList[o-1]=e,this.searchList[o]=i}moveDown(o){if(o===this.searchList.length-1)return;let e=this.searchList[o],i=this.searchList[o+1];this.searchList[o+1]=e,this.searchList[o]=i}handleSubmit(){return k(this,null,function*(){if(this.submitting)return;this.submitting=!0;let o=this.validateForm.value,e=[];o.logo&&e.push(P(o.logo)),o.darkLogo&&e.push(P(o.darkLogo));let i=yield Promise.all(e);for(let t of i)if(!t.valid){this.message.error(`${S("_errLogo")}: "${t.url}"`),this.submitting=!1;return}this.submitting=!1,this.modal.info({nzTitle:S("_syncDataOut"),nzOkText:S("_confirmSync"),nzContent:S("_confirmSyncTip"),nzOnOk:()=>{this.submitting=!0;let t=T(I({},o),{list:this.searchList.filter(r=>r.name.trim())});A({message:"update search",content:JSON.stringify(t),path:R}).then(()=>{this.message.success(S("_syncSuccessTip"))}).finally(()=>{this.submitting=!1})}})})}onChangeUpload(o,e){this.searchList[e].icon=o.cdn}static \u0275fac=function(e){return new(e||s)(w(Z),w(b),w(N))};static \u0275cmp=$({type:s,selectors:[["system-tag"]],features:[W([N,b])],decls:46,vars:27,consts:[["suffixLogo",""],["suffixDarkLogo",""],["basicTable",""],["nz-button","",1,"add-btn",3,"click","nzLoading"],["nz-button","","nzType","primary",3,"click","nzLoading"],["nz-form","",3,"formGroup"],[3,"nzSpan"],[3,"nzSuffix"],["nz-input","","formControlName","logo"],["nz-input","","formControlName","darkLogo"],["formControlName","height",3,"nzMin","nzMax"],[1,"mb-2"],[3,"nzData","nzShowPagination"],[1,"min-w-[150px]"],[1,"min-w-[220px]"],[1,"min-w-[260px]"],[1,"min-w-[100px]"],[1,"min-w-[170px]"],[4,"ngFor","ngForOf"],[3,"onChange"],["nz-input","","maxlength","10",3,"ngModelChange","ngModel"],["nz-input","",3,"ngModel","ngModelChange",4,"ngIf"],[1,"whitespace-nowrap"],["class","icon",3,"src",4,"ngIf"],["nz-input","","type","text",2,"width","180px",3,"ngModelChange","ngModel"],["nz-input","","maxlength","50",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[1,"select-none"],[3,"click"],[1,"ml-2.5",3,"click"],["nz-popconfirm","","nzPopconfirmPlacement","rightTop","nzOkType","danger","nzPopconfirmPlacement","bottom","class","ml-2.5 !text-red-500",3,"nzPopconfirmTitle","nzOnConfirm",4,"ngIf"],["nz-input","",3,"ngModelChange","ngModel"],[1,"icon",3,"src"],["nz-popconfirm","","nzPopconfirmPlacement","rightTop","nzOkType","danger","nzPopconfirmPlacement","bottom",1,"ml-2.5","!text-red-500",3,"nzOnConfirm","nzPopconfirmTitle"]],template:function(e,i){if(e&1){let t=h();m(0,"button",3),u("click",function(){return c(t),d(i.handleAdd())}),p(1),a(),m(2,"button",4),u("click",function(){return c(t),d(i.handleSubmit())}),p(3),a(),m(4,"form",5)(5,"nz-form-item")(6,"nz-form-label",6),p(7),a(),m(8,"nz-form-control",6)(9,"nz-input-group",7),v(10,"input",8),a(),f(11,Ve,1,0,"ng-template",null,0,V),a()(),m(13,"nz-form-item")(14,"nz-form-label",6),p(15),a(),m(16,"nz-form-control",6)(17,"nz-input-group",7),v(18,"input",9),a(),f(19,Ee,1,0,"ng-template",null,1,V),a()(),m(21,"nz-form-item")(22,"nz-form-label",6),p(23),a(),m(24,"nz-form-control",6),v(25,"nz-slider",10),a()()(),m(26,"div",11),p(27,"e.g. https://example.com/search?q=${q}"),a(),m(28,"nz-table",12,2)(30,"thead")(31,"tr")(32,"th",13),p(33),a(),m(34,"th",14),p(35),a(),m(36,"th",15),p(37),a(),m(38,"th",14),p(39),a(),m(40,"th",16),p(41),a(),m(42,"th",17),p(43),a()()(),m(44,"tbody"),f(45,Fe,19,11,"tr",18),a()()}if(e&2){let t=L(12),r=L(20);l("nzLoading",i.submitting),n(),M(" ",i.$t("_addRow"),`
`),n(),l("nzLoading",i.submitting),n(),M(" ",i.$t("_save"),`
`),n(),l("formGroup",i.validateForm),n(2),l("nzSpan",2),n(),g(i.$t("_logoImg")),n(),l("nzSpan",22),n(),l("nzSuffix",t),n(5),l("nzSpan",2),n(),g(i.$t("_logoDarkImg")),n(),l("nzSpan",22),n(),l("nzSuffix",r),n(5),l("nzSpan",2),n(),g(i.$t("_logoMaxHeight")),n(),l("nzSpan",22),n(),l("nzMin",40)("nzMax",120),n(3),l("nzData",i.searchList)("nzShowPagination",!1),n(5),g(i.$t("_engineName")),n(2),g(i.$t("_engineUrl")),n(2),g(i.$t("_icon")),n(2),g(i.$t("_desc")),n(2),g(i.$t("_isDisable")),n(2),g(i.$t("_action")),n(2),l("ngForOf",i.searchList)}},dependencies:[ee,K,j,H,q,Y,J,te,X,Q,U,B,G,re,oe,ie,ne,Ce,he,ge,ue,ze,fe,Se,se,ae,le,me,ye,_e,de,ce,pe,Ie,ve,xe,Me,we,Ne,be,Le,Te],styles:[".add-btn[_ngcontent-%COMP%]{margin-bottom:20px;margin-right:20px}.icon[_ngcontent-%COMP%]{width:30px;height:30px;margin-right:10px;object-fit:cover}  #file{vertical-align:middle;margin-left:10px}  #file .anticon{font-size:20px}"]})};export{D as default};
