import{b as ie}from"./chunk-AXOM27UR.js";import{c as oe}from"./chunk-GQHVRM6H.js";import{b as $}from"./chunk-2RWONAGL.js";import{a as K,b as Q,c as U,d as Y,e as Z,f as ee,g as te}from"./chunk-S3CVJLU7.js";import{a as L}from"./chunk-BZ6CPFGE.js";import{b as O}from"./chunk-T4QY42HJ.js";import{c as H,l as W}from"./chunk-KG7M7Q7X.js";import"./chunk-NNZ6XNKM.js";import{m as B,o as X,p as J,r as q}from"./chunk-RPGVK5ID.js";import"./chunk-4CKYBKZL.js";import"./chunk-YEU5736B.js";import{a as k,f as G,j as R}from"./chunk-CJE6JL4W.js";import"./chunk-6DS2HA4Z.js";import"./chunk-M75Z4AMP.js";import{Ac as V,Ec as j,Na as h,Oa as y,Vb as b,Yb as F,Zb as M,ac as I,fc as w,gc as E,ic as P,jc as x,kc as D,wc as _,xc as A,zc as T}from"./chunk-X4OU5YG3.js";import{Jd as C,Ub as t,Vb as i,Wb as o,Xb as s,a as u,b as z,fc as N,g as v,ib as e,sb as l,xb as g,xc as m,yc as p,zc as S,ze as d}from"./chunk-TVH3SPIR.js";var f=class c{constructor(a,r,n){this.fb=a;this.notification=r;this.message=n;this.validateForm=this.fb.group({password:[""],address:[""],XFAPIPassword:[""],mailConfig:[""],hashMode:[!1]})}$t=d;textareaSize={minRows:5,maxRows:20};validateForm;submitting=!1;ngOnInit(){this.getConfigInfo()}getConfigInfo(){this.submitting=!0,h().then(a=>{let{data:r}=a;this.validateForm.get("password").setValue(r.password||""),this.validateForm.get("address").setValue(r.address||""),this.validateForm.get("mailConfig").setValue(JSON.stringify(r.mailConfig,null,2)||""),this.validateForm.get("XFAPIPassword").setValue(r.XFAPIPassword||""),this.validateForm.get("hashMode").setValue(r.hashMode||!1)}).finally(()=>{this.submitting=!1})}handleSubmit(){return v(this,null,function*(){if(!this.submitting)try{this.submitting=!0;let a=z(u({},this.validateForm.value),{mailConfig:JSON.parse(this.validateForm.get("mailConfig")?.value||"{}")});yield y(a),this.message.success(d("_saveSuccess")),setTimeout(()=>{location.reload()},2e3)}catch(a){this.notification.error("Error",a.message)}finally{this.submitting=!1}})}static \u0275fac=function(r){return new(r||c)(l(P),l(L),l(j))};static \u0275cmp=g({type:c,selectors:[["system-config"]],decls:28,vars:18,consts:[["nz-form","",3,"formGroup"],["nzRequired","",3,"nzSpan"],[3,"nzSpan"],["nz-input","","formControlName","address"],["nz-input","","formControlName","password"],[3,"nzSpan","nzNoColon"],["nz-checkbox","","formControlName","hashMode"],["nz-input","","formControlName","XFAPIPassword"],["nz-input","","formControlName","mailConfig",3,"nzAutosize"],["nz-button","","nzType","primary",3,"click","nzLoading"]],template:function(r,n){r&1&&(i(0,"form",0)(1,"nz-form-item")(2,"nz-form-label",1),m(3),o(),i(4,"nz-form-control",2),s(5,"input",3),o()(),i(6,"nz-form-item")(7,"nz-form-label",1),m(8),o(),i(9,"nz-form-control",2),s(10,"input",4),o()(),i(11,"nz-form-item")(12,"nz-form-label",5),m(13,"Hash Mode"),o(),i(14,"nz-form-control",2),s(15,"label",6),o()(),i(16,"nz-form-item")(17,"nz-form-label",2),m(18),o(),i(19,"nz-form-control",2),s(20,"input",7),o()(),i(21,"nz-form-item")(22,"nz-form-label",2),m(23,"Email"),o(),i(24,"nz-form-control",2),s(25,"textarea",8),o()(),i(26,"button",9),N("click",function(){return n.handleSubmit()}),m(27),o()()),r&2&&(t("formGroup",n.validateForm),e(2),t("nzSpan",4),e(),p(n.$t("_address")),e(),t("nzSpan",10),e(3),t("nzSpan",4),e(),p(n.$t("_password")),e(),t("nzSpan",10),e(3),t("nzSpan",4)("nzNoColon",!0),e(2),t("nzSpan",10),e(3),t("nzSpan",4),e(),p(n.$t("_apiPass")),e(),t("nzSpan",10),e(3),t("nzSpan",4),e(2),t("nzSpan",10),e(),t("nzAutosize",n.textareaSize),e(),t("nzLoading",n.submitting),e(),S(" ",n.$t("_save")," "))},dependencies:[x,I,b,F,M,D,E,w,C,B,$,oe,V,T,_,A,te,Q,K,Y,U,ee,Z,ie,R,G,k,O,W,H,q,J,X],encapsulation:2})};export{f as default};
