import{g as v,u as y}from"./chunk-VGS5BVAN.js";import{Aa as T,ja as f,ma as u,na as S}from"./chunk-SASNPLHX.js";import{Pd as p,Qd as E,Wd as l,Xd as B,f as _,g as b,ie as I,ke as i,we as a,ze as g}from"./chunk-LI6FNMAP.js";var d=_(B(),1);function F(){return b(this,null,function*(){if(i)return;function t(e){a.set(e),f.emit("WEB_FINISH"),window.__FINISHED__=!0}let r=S(a(),I);if(!I)return t(r);if(window.localStorage.getItem(l.DATE_TIME)!==p.datetime){let e=[l.WEBSITE,l.DATE_TIME];Array.from({length:globalThis.localStorage.length},(o,s)=>globalThis.localStorage.key(s)).forEach(o=>{o&&e.includes(o)&&globalThis.localStorage.removeItem(o)}),globalThis.localStorage.setItem(l.DATE_TIME,p.datetime),d.default.removeItem(l.WEBSITE),t(r),I&&setTimeout(()=>{f.emit("NOTIFICATION",{type:"success",title:g("_buildSuccess"),content:p.datetime,config:{nzDuration:0}})},1e3);return}try{let e=(yield d.default.getItem(l.WEBSITE))||r;t(e)}catch{t(r)}})}function m(t){return i?T({content:JSON.stringify(t),path:E}):d.default.setItem(l.WEBSITE,t)}function R(t){let{id:r}=v(),{oneIndex:n,twoIndex:e}=y(r),o=!t[n].nav[e].collapsed;return t[n].nav[e].collapsed=o,t[n].nav[e].nav.map(s=>(s.collapsed=o,s)),i||m(t),o}function H(t,r=!1){return b(this,null,function*(){let n=!1,e=u({navs:a(),filter:o=>t.includes(r?o.rId:o.id)?(n=!0,!1):!0});return n&&(yield m(e),i||(a.set(e),f.emit("WEB_REFRESH"))),n})}function O(t,r){let n=Object.keys(r),e=!1,o=u({navs:a(),webCallback:s=>{if(s.id===t){e=!0;for(let c of n)s[c]=r[c]}return e}});return a.set(o),m(o),i||f.emit("WEB_REFRESH"),e}function M(t){let r=null;return u({navs:a(),webCallback:n=>n.id===t?(r=n,!0):!1}),r}function j(t,r){let n=Object.keys(r),e=!1,o=u({navs:a(),callback:s=>{if(s.id===t){e=!0;for(let c of n)s[c]=r[c]}return e}});return a.set(o),m(o),e}function K(t,r){let n=!1,e=u({navs:a(),callback:o=>{o.id===t&&(n=!0,o.nav.unshift(r))}});return a.set(e),m(e),i||f.emit("WEB_REFRESH"),n}export{F as a,m as b,R as c,H as d,O as e,M as f,j as g,K as h};
